<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oversimplified - The Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500&display=swap" rel="stylesheet">
    <link rel="icon" href="/images/shop/bucket.png">
    <style>
        :root {
            --primary: #F0C808;
            --dark: #2E282A;
            --light: #EEF0F2;
            --accent: #E53D00;
            --secondary: #17BEBB;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        body {
        background-color: #3B7DDD;
        color: white;
        font-family: 'Fredoka', sans-serif;
        margin: 0;
        padding: 20px;
        overflow-x: hidden;
        }
        .title-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: linear-gradient(to bottom right, #FFD93D, #FF4D4D);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 10000;
      animation: popIn 1.5s ease-out;
    }

    .title-screen h1 {
      font-size: 4em;
      color: #222;
      margin-bottom: 0.2em;
      text-shadow: 2px 2px #fff;
    }

    .title-screen p {
      font-size: 1.5em;
      color: #333;
    }

    .enter-button {
      margin-top: 40px;
      padding: 15px 30px;
      font-size: 1.3em;
      background-color: #FF4D4D;
      color: white;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .enter-button:hover {
      transform: scale(1.1);
    }

    @keyframes popIn {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes flipInNew {
    0% {
        transform: translate(-50%, -50%) rotateY(90deg);
        opacity: 0;
    }
    100% {
        transform: translate(-50%, -50%) rotateY(0deg);
        opacity: 1;
    }
}

    main {
      display: none;
      padding: 20px;
    }
        
        h1, h2, h3, p {
        color: white;
        }

        header, .section-title {
        text-align: center;
        margin-bottom: 30px;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .level-select {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            background-color: var(--light);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .level-btn {
            background-color: var(--dark);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 20px 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .level-btn.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .level-btn.unlocked {
            background-color: var(--secondary);
        }
        
        .level-btn.active {
            animation: glow 1.5s infinite alternate;
            background-color: var(--primary);
            color: var(--dark);
        }
        .level-card {
  background-color: #FFD93D;
  border-radius: 20px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  color: #222;
  font-size: 1.2em;
  text-align: center;
  transition: transform 0.2s;
  width: 250px;
  height: 250px; /* Enforce square shape */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
}
@keyframes bossPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
@keyframes glowItem {
  0% { box-shadow: 0 0 0px gold; }
  50% { box-shadow: 0 0 25px 10px gold; }
  100% { box-shadow: 0 0 0px gold; }
}

.shop-item.glow {
  animation: glowItem 1s ease forwards;
}

.boss-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: linear-gradient(135deg, #ff512f, #dd2476); /* Fiery gradient */
  color: white;
  padding: 5px 10px;
  border-radius: 10px;
  font-weight: bold;
  font-size: 0.8em;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  animation: bossPulse 2s infinite;
}
@keyframes sparkle {
  0% { box-shadow: 0 0 0px gold; }
  50% { box-shadow: 0 0 20px 5px gold; }
  100% { box-shadow: 0 0 0px gold; }
}

.level-card.boss:hover {
  animation: sparkle 1s ease forwards;
}
@keyframes jumpButton {
  0% { transform: translateY(0); }
  30% { transform: translateY(-15px); }
  50% { transform: translateY(0); }
  70% { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}

.jumping {
  animation: jumpButton 0.8s ease;
}


    .level-card:hover {
      transform: scale(1.05);
      background-color: #FFE066;
    }
    button {
      background-color: #FF4D4D;
      border: none;
      border-radius: 12px;
      font-size: 1.1em;
      padding: 10px 20px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: background 0.3s;
    }

    button:hover {
      background-color: #D43F3F;
    }

        .level-card .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .level-card h2 {
            margin: 10px 0 5px 0;
            font-size: 1.5em;
            color: #2E282A;
        }

        .level-card p {
            font-size: 0.95em;
            color: #666;
            margin-bottom: 20px;
        }
        .level-card.locked {
            pointer-events: none;
            background: #ccc;
        }

        .level-card button {
            padding: 10px 20px;
            font-size: 1em;
            background: #E53D00;
            color: white;
            border: none;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .level-card button:hover {
            background: #17BEBB;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary);
            }
            to {
                box-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
            }
        }
        @keyframes unlockPulse {
            0% { transform: scale(1); box-shadow: 0 0 5px 2px gold; }
            50% { transform: scale(1.1); box-shadow: 0 0 20px 5px gold; }
            100% { transform: scale(1); box-shadow: 0 0 5px 2px gold; }
            }

            .unlocked-flash {
            animation: unlockPulse 1.5s ease;
        }
        
        .level-info {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.7rem;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .battle-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: var(--light);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            min-height: 500px;
        }
        
        .battle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .battle-stage {
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 300px;
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            background-size: cover;
            background-position: center;
        }
        
        .character {
            width: 150px;
            height: 200px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .player {
            transform: scaleX(-1);
        }
        
        .health-bar {
            height: 20px;
            width: 100%;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .health-fill {
            height: 100%;
            background-color: var(--accent);
            transition: width 0.3s ease;
        }
        
        .character-info {
            text-align: center;
            width: 150px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 10px;
        }
        
        .battle-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .action-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            background-color: var(--accent);
            transform: translateY(-2px);
        }
        
        .battle-log {
            min-height: 100px;
            max-height: 150px;
            overflow-y: auto;
            background-color: #fff;
            border-radius: 5px;
            padding: 10px;
            font-size: 0.9rem;
            border: 1px solid #ddd;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px dashed #eee;
        }
        
        .reward-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            text-align: center;
        }
        
        .reward-container {
            background-color: var(--dark);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 30px var(--primary);
            max-width: 80%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .reward-title {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .reward-item, .achievement-item {
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      margin: 10px;
      display: inline-block;
      width: 200px;
    }
    .shop-item {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 10px;
    padding: 15px;
    text-align: center;
    margin: 10px;
    display: inline-block;
    width: 200px;
    position: relative; /* üõ†Ô∏è This makes owned badge stick correctly */
}

.shop-item.owned {
  background: linear-gradient(135deg, #ffd700, #ffb700); /* Gold glow background */
  color: #2E282A; /* Dark text for contrast */
  border: 2px solid gold;
  box-shadow: 0 0 20px 5px rgba(255, 215, 0, 0.7);
  animation: ownedCelebrate 2s infinite alternate;
}

@keyframes ownedCelebrate {
  0% { transform: scale(1); box-shadow: 0 0 10px 2px rgba(255, 215, 0, 0.5); }
  50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(255, 215, 0, 0.9); }
  100% { transform: scale(1); box-shadow: 0 0 10px 2px rgba(255, 215, 0, 0.5); }
}
@keyframes flyStar {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--dx, 50px), var(--dy, -50px)) scale(0);
    opacity: 0;
  }
}

.fly-star {
  position: absolute;
  font-size: 20px;
  pointer-events: none;
  animation: flyStar 1s forwards;
  z-index: 9999;
}

        .reward-icon {
            width: 40px;
            height: 40px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark);
        }
        
        .close-reward {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 1.2rem;
            margin-top: 20px;
            cursor: pointer;
        }
        
        .stats-area {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  background: linear-gradient(135deg, #3B7DDD, #4facfe);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  gap: 20px;
  margin-bottom: 30px;
}
        
.player-stats, .rewards-preview {
  flex: 1 1 300px;
  background: white;
  color: #2E282A;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}
.player-stats h3, .rewards-preview h3 {
  margin-bottom: 15px;
  color: #3B7DDD;
}

.player-stats p {
  margin: 10px 0;
  color:#6a0dad;
  font-size: 1.2em;
}

        .hidden {
            display: none !important;
        }
        
        .attack-animation {
            animation: attack 0.5s ease-in-out;
        }
        
        @keyframes attack {
            0% { transform: translateX(0) scaleX(-1); }
            50% { transform: translateX(50px) scaleX(-1); }
            100% { transform: translateX(0) scaleX(-1); }
        }
        
        .enemy-attack-animation {
            animation: enemy-attack 0.5s ease-in-out;
        }
        
        @keyframes enemy-attack {
            0% { transform: translateX(0); }
            50% { transform: translateX(-50px); }
            100% { transform: translateX(0); }
        }
        .lock-icon {
  position: absolute;
  top: 5px;
  right: 5px;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  font-size: 1em;
  padding: 4px 6px;
  border-radius: 50%;
}

        .damage-text {
            position: absolute;
            color: red;
            font-weight: bold;
            font-size: 1.5rem;
            animation: damage-float 1s ease-out forwards;
        }
        
        @keyframes damage-float {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        .heal-text {
            position: absolute;
            color: green;
            font-weight: bold;
            font-size: 1.5rem;
            animation: heal-float 1s ease-out forwards;
        }
        
        @keyframes heal-float {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        .level-description {
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 5px;
            font-style: italic;
        }
        
        .character-select {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        
        .character-option {
            text-align: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .character-option:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .character-option.selected {
            background-color: var(--primary);
            color: var(--dark);
        }
        
        .character-preview {
            width: 100px;
            height: 120px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            margin: 0 auto;
        }
        
        .level-intro {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
        }
        
        .achievement-popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--dark);
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slide-in-out 5s forwards;
        }
        
        @keyframes slide-in-out {
            0% { transform: translateX(100%); opacity: 0; }
            10% { transform: translateX(0); opacity: 1; }
            90% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }
        
        .sound-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }
        
        .achievements-btn {
            background-color: var(--primary);
            color: var(--dark);
        }
        
        .achievements-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .achievements-container {
            background-color: var(--dark);
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .achievement-locked {
            filter: grayscale(1);
            opacity: 0.5;
        }
        
        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        /* Shop styles */
        .shop-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .shop-container {
            background-color: var(--dark);
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            color: white;
        }
        
        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .shop-currency {
            background-color: var(--primary);
            color: var(--dark);
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
    
        
        .shop-item-image {
            width: 80px;
            height: 80px;
            margin: 0 auto 10px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        
        .shop-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .shop-item-desc {
            font-size: 0.8rem;
            margin-bottom: 10px;
            height: 40px;
            overflow: hidden;
        }
        
        .shop-item-price {
            background-color: var(--primary);
            color: var(--dark);
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .shop-buy-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            width: 100%;
            padding: 5px;
            margin-top: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .shop-buy-btn:hover {
            background-color: var(--accent);
        }
        
        .shop-buy-btn:disabled {
            background-color: #888;
            cursor: not-allowed;
        }
        
        .owned-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  background: linear-gradient(135deg, #6a0dad, #b19cd9); /* Purple gradient */
  color: white;
  font-weight: bold;
  padding: 5px 10px;
  border-radius: 10px;
  font-size: 0.7em;
  box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  opacity: 0;
  animation: fadeInBadge 0.8s forwards;
}
@keyframes fadeInBadge {
  to {
    opacity: 1;
  }
}


        
        .special-move-desc {
            margin-top: 5px;
            font-size: 0.8rem;
            color: #666;
        }
        #victory-banner {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to right, #FFD700, #FFA500);
      color: #2E282A;
      padding: 15px 30px;
      border-radius: 30px;
      font-size: 1.5em;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: popFade 3s ease forwards;
      z-index: 9999;
    }
    .animated-emoji {
      position: absolute;
      font-size: 3em;
      animation: floatUp 3s ease-in-out forwards;
    }
    @keyframes popFade {
      0% { transform: translateX(-50%) scale(0.5); opacity: 0; }
      30% { transform: translateX(-50%) scale(1.2); opacity: 1; }
      60% { transform: translateX(-50%) scale(1); }
      100% { transform: translateX(-50%) scale(1); opacity: 0; }
    }
    @keyframes floatUp {
      0% { bottom: 0; opacity: 1; }
      100% { bottom: 200px; opacity: 0; }
    }
    #shop, #rewards-gallery, #achievements-screen {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 30px;
    }
    .achievement-locked {
    filter: grayscale(1) brightness(0.6);
    opacity: 0.5;
    pointer-events: none;
}
#reward-chest {
  position: fixed;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(to right, #fff3b0, #ffe066);
  color: #2E282A;
  padding: 20px 40px;
  border-radius: 20px;
  text-align: center;
  font-size: 1.2em;
  font-weight: bold;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  animation: popFadeChest 5s ease forwards;
  z-index: 9998;
}

#chest-icon {
  font-size: 4em;
  margin-bottom: 10px;
  animation: shakeChest 2s infinite;
}

#reward-text {
  margin-top: 10px;
  font-size: 1.5em;
}
#hero-profile .reward-container {
    background: #fff8dc; /* Light gold background */
    color: #2E282A; /* Dark text */
    border: 4px solid gold;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

#hero-profile h2 {
    font-size: 2rem;
    margin-bottom: 10px;
    color: goldenrod;
}

#hero-profile img {
    margin-top: 10px;
    margin-bottom: 15px;
    border: 3px solid goldenrod;
    border-radius: 10px;
}

#hero-profile p {
    margin: 8px 0;
    font-size: 1.1em;
    color:#222;
}

#hero-profile strong {
    color: #c19200; /* Rich gold color for labels */
}
@keyframes flipIn {
    0% {
        transform: rotateY(90deg);
        opacity: 0;
    }
    100% {
        transform: rotateY(0deg);
        opacity: 1;
    }
}
.level-card.boss {
  background: linear-gradient(135deg, #6a0dad, #b19cd9); /* Purple gradient */
  color: white;
}
.level-card.boss:hover {
  background: linear-gradient(135deg, #8e44ad, #d7bde2);
}

#hero-profile .reward-container {
    animation: flipIn 0.5s ease forwards;
}
.character-card.unlocked {
  background: linear-gradient(135deg, #ffd700, #ffb700); /* Gold glow background */
  color: #2E282A;
  border: 2px solid gold;
  box-shadow: 0 0 20px 5px rgba(255, 215, 0, 0.7);
  animation: unlockedCelebrate 2s infinite alternate;
}
.reward-item.unlocked {
  background: linear-gradient(135deg, #ffd700, #ffb700);
  color: #2E282A;
  border: 2px solid gold;
  box-shadow: 0 0 20px 5px rgba(255, 215, 0, 0.7);
  animation: unlockedCelebrate 2s infinite alternate;
}
@keyframes unlockedCelebrate {
  0% { transform: scale(1); box-shadow: 0 0 10px 2px rgba(255, 215, 0, 0.5); }
  50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(255, 215, 0, 0.9); }
  100% { transform: scale(1); box-shadow: 0 0 10px 2px rgba(255, 215, 0, 0.5); }
}

@keyframes shakeChest {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

.boss-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: linear-gradient(135deg, #ff512f, #dd2476); /* Fiery gradient */
  color: white;
  padding: 5px 10px;
  border-radius: 10px;
  font-weight: bold;
  font-size: 0.8em;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.progress-bar {
  width: 100%;
  background-color: #ddd;
  border-radius: 20px;
  overflow: hidden;
  height: 20px;
  margin-top: 10px;
}

.progress-fill {
  background: linear-gradient(90deg, #FFD93D, #FF4D4D);
  height: 100%;
  width: 0%;
  border-radius: 20px;
  transition: width 0.6s ease-in-out;
}

@keyframes popFadeChest {
  0% { opacity: 0; transform: translateX(-50%) scale(0.5); }
  20% { opacity: 1; transform: translateX(-50%) scale(1.2); }
  40% { transform: translateX(-50%) scale(1); }
  90% { opacity: 1; }
  100% { opacity: 0; }
}
.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.modal-content {
  background: white;
  padding: 30px 40px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  animation: popIn 0.3s ease-out;
}

.modal-buttons {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  gap: 15px;
}

.modal-content button {
  padding: 10px 20px;
  font-size: 1em;
  border-radius: 8px;
  cursor: pointer;
  border: none;
}
.reward-item {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.reward-item:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px 5px rgba(255, 215, 0, 0.6); /* Gold-ish soft glow */
  border-color: gold;
}

.danger-btn {
  background-color: #ff4d4d;
  color: white;
}

#cancel-reset {
  background-color: #ccc;
  color: #222;
}

.hidden {
  display: none !important;
}

@keyframes popIn {
  0% { transform: scale(0.5); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

    </style>
</head>
<body>
    <div class="title-screen" id="titleScreen">
        <h1>Oversimplified</h1>
        <p>The Game</p>
        <button class="enter-button" onclick="enterGame()">Enter History</button>
      </div>
    <main id="mainGame">
    <header>
        <h1>Oversimplified - The Game</h1>
        <p>Battle through history, one simplified event at a time!</p>
        <button id="sound-toggle" class="sound-toggle">üîä Sound: ON</button>
    </header>
    
    <div class="game-container">
        <div class="stats-area">
            <div class="player-stats">
                <h3>Player Stats</h3>
                <p>Completed Levels: <span id="completed-levels">0</span>/10</p>
                <div class="progress-bar">
                    <div id="completed-progress" class="progress-fill"></div>
                  </div>
                <p>Total Victories: <span id="total-victories">0</span></p>
                <p>Stars: <span id="player-stars">0</span> üåü</p>
                <button id="reset-game" class="action-btn">Reset Game</button>
            </div>
            <div class="rewards-preview">
                <h3>Rewards & Collections</h3>
                <button id="show-characters" class="action-btn">Your Characters</button>
                <br>
                <button id="show-rewards" class="action-btn">View Rewards Gallery</button>
                <br>
                <button id="show-achievements" class="action-btn achievements-btn">Achievements</button>
                <br>
                <button id="show-shop" class="action-btn">History Shop</button>
            </div>
        </div>
        <div id="victory-banner" style="display:none;">
            üèÜ You Won! Next Level Unlocked! üèÜ
          </div>
          <div id="star-flyup-container" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:99999;"></div>
          <div id="reward-chest" style="display:none;">
            <div id="chest-icon" onclick="openChest()">üì¶</div>
            <div id="reward-text" style="display:none;">You Won! Next Level Unlocked!</div>
          </div>        
          <canvas id="confetti-canvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999; display:none;"></canvas>  
        
        <div id="level-select" style="padding: 40px; text-align:center;">
            <h1 style="font-size:2.5em; margin-bottom:30px;">üß≠ Choose Your Mission</h1>
          
            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px; max-width:1200px; margin:auto;">
              
              <!-- Level Card Template -->
              <div class="level-card" onclick="selectLevel({id:1})">
                <div class="icon">üé§</div>
                <h2>American Revolution</h2>
                <p>Minigame: Rhetoric Duel</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:2})">
                <div class="icon">üì∏</div>
                <h2>French Revolution</h2>
                <p>Minigame: Meme Warfare</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:3})">
                <div class="icon">‚öîÔ∏è</div>
                <h2>Civil War</h2>
                <p>Minigame: Grid Battle</p>
                <button>Play</button>
              </div>
          
              <div class="level-card boss" onclick="selectLevel({id:4})">
                <div class="boss-badge">üî• BOSS</div>
                <div class="icon">üé∂</div>
                <h2>World War 1</h2>
                <p>BOSS Minigame: Trench Karaoke</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:5})">
                <div class="icon">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
                <h2>Cold War</h2>
                <p>Minigame: Spy Bluff</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:6})">
                <div class="icon">üö©</div>
                <h2>Russian Revolution</h2>
                <p>Minigame: Startup Pitch</p>
                <button>Play</button>
              </div>
          
              <div class="level-card boss" onclick="selectLevel({id:7})">
                <div class="boss-badge">üî• BOSS</div>
                <div class="icon">üí£</div>
                <h2>World War 2</h2>
                <p>BOSS Minigame: Blitzkrieg Dodgeball</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:8})">
                <div class="icon">üé©</div>
                <h2>Napoleonic Wars</h2>
                <p>Minigame: Fashion Duel</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:9})">
                <div class="icon">üì∫</div>
                <h2>Vietnam War</h2>
                <p>Minigame: TV Propaganda</p>
                <button>Play</button>
              </div>
          
              <div class="level-card" onclick="selectLevel({id:10})">
                <div class="icon">üöÄ</div>
                <h2>Cuban Missile Crisis</h2>
                <p>Minigame: Missile Tinder</p>
                <button>Play</button>
              </div>
          
            </div>
          </div>
        
        <div class="battle-area hidden" id="battle-area">
            <div class="battle-header">
                <h2 id="level-title">Level 1: The American Revolution</h2>
                <button id="back-btn" class="action-btn">Back to Levels</button>
            </div>
            
            <div class="level-intro" id="level-intro">
                <p id="level-description">Welcome to the American Revolution! The colonists are fighting for their independence from Great Britain.</p>
                <p>Choose your character:</p>
                <div class="character-select" id="character-select">
                    <!-- Character options will be generated here -->
                </div>
                <button id="start-battle" class="action-btn">Start Battle</button>
            </div>
            
            <div class="battle-stage hidden" id="battle-stage">
                <div class="character-info">
                    <h3 id="player-name">American Colonist</h3>
                    <div class="character player" id="player-character"></div>
                    <div class="health-bar">
                        <div class="health-fill" id="player-health" style="width: 100%;"></div>
                    </div>
                    <div class="special-move-desc" id="player-special-desc"></div>
                </div>
                
                <div id="vs-display" style="font-size: 2rem; font-weight: bold;">VS</div>
                
                <div class="character-info">
                    <h3 id="enemy-name">British Redcoat</h3>
                    <div class="character enemy" id="enemy-character"></div>
                    <div class="health-bar">
                        <div class="health-fill" id="enemy-health" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
            
            <div class="battle-actions hidden" id="battle-actions">
                <button class="action-btn" data-action="attack">Attack</button>
                <button class="action-btn" data-action="special">Special Move</button>
                <button class="action-btn" data-action="heal">Heal</button>
                <button class="action-btn" data-action="item" id="item-btn">Use Item</button>
            </div>
            
            <div class="battle-log hidden" id="battle-log">
                <div class="log-entry">Battle started! Choose your action...</div>
            </div>
        </div>
    </div>
    
    <div class="reward-screen hidden" id="reward-screen">
        <div class="reward-container">
            <h2 class="reward-title">Rewards Unlocked!</h2>
            <div id="rewards-list">
                <!-- Rewards will be listed here -->
            </div>
            <div id="stars-earned">
                <p style="font-size: 1.5rem;">Stars Earned: <span id="level-stars">1</span> üåü</p>
            </div>
            <button class="close-reward" id="close-reward">Continue</button>
        </div>
    </div>
    
    <div class="reward-screen hidden" id="rewards-gallery">
        <div class="reward-container">
            <h2 class="reward-title">Rewards Gallery</h2>
            <div id="gallery-list">
                <!-- Unlocked rewards will be shown here -->
            </div>
            <button class="close-reward" id="close-gallery">Close Gallery</button>
        </div>
    </div>
    
    <div class="achievements-screen hidden" id="achievements-screen">
        <div class="achievements-container">
            <h2 class="reward-title">Achievements</h2>
            <div class="achievements-grid" id="achievements-grid">
                <!-- Achievements will be generated here -->
            </div>
            <button class="close-reward" id="close-achievements">Close</button>
        </div>
    </div>
    <div class="reward-screen hidden" id="characters-gallery">
        <div class="reward-container">
          <h2 class="reward-title">Your Heroes</h2>
          <div id="filter-sort-bar" style="margin-bottom: 15px; text-align: center;">
            <select id="sort-option" style="padding:5px; margin-right:10px;">
              <option value="name">Sort by Name</option>
              <option value="rarity">Sort by Rarity</option>
              <option value="hp">Sort by HP</option>
            </select>
            <button id="apply-sort" class="action-btn">Apply Sort</button>
          </div>          
          <div id="characters-list" style="display:flex; flex-wrap:wrap; justify-content:center; gap:20px;">
            <!-- Hero cards will be generated here -->
          </div>
          <button class="close-reward" id="close-characters">Close</button>
        </div>
      </div>
      <div id="hero-profile" class="reward-screen hidden">
        <div class="reward-container">
          <h2 id="profile-name"></h2>
          <img id="profile-image" src="" alt="" style="width:120px; height:150px; object-fit:contain;">
          <p id="profile-hp"></p>
          <p id="profile-special"></p>
          <p id="profile-rarity"></p>
          <button id="upgrade-hero" class="action-btn" style="margin-top: 10px;">Upgrade ‚≠ê</button>
          <button class="close-reward" id="close-profile">Close</button>
        </div>
      </div>      
    <div class="shop-screen hidden" id="shop-screen">
        <div class="shop-container">
            <div class="shop-header">
                <h2 class="reward-title">History Shop</h2>
                <div class="shop-currency">
                    <span id="shop-stars">0</span> üåü
                </div>
            </div>
            <div class="shop-items" id="shop-items">
                <!-- Shop items will be generated here -->
            </div>
            <button class="close-reward" id="close-shop">Close Shop</button>
        </div>
    </div>
    <div id="reset-modal" class="modal hidden">
        <div class="modal-content">
          <h3 style="color:#222">Reset Game?</h3>
          <p style="color:#222">Are you sure you want to erase all progress?</p>
          <div class="modal-buttons">
            <button id="confirm-reset" class="danger-btn">Yes, Reset</button>
            <button id="cancel-reset">Cancel</button>
          </div>
        </div>
      </div>
    </main>
    <script>
        const rewardPools = {
  common: [
    "üìú Old Map Fragment",
    "üß¢ Historian's Hat",
    "üçµ Tea Party VIP Pass",
    "üìñ Oversimplified Textbook",
    "‚öîÔ∏è Rusty Bayonet"
  ],
  rare: [
    "üéñÔ∏è Soldier's Medal",
    "üëë Czar's Broken Crown",
    "üõ°Ô∏è Shield of Oversimplification",
    "üß≥ Napoleon's Tiny Luggage",
    "ü•ñ Revolutionary Baguette"
  ],
  legendary: [
    "üöÄ Time Travel License",
    "üèÜ History MVP Trophy",
    "üñºÔ∏è Dude, Uncool Banner",
    "üé© Napoleon's Magic Hat",
    "üê¥ Tiny Horse of Destiny"
  ]
};
const levelRarity = {
  1: 'common',
  2: 'common',
  3: 'rare',
  4: 'common',
  5: 'rare',
  6: 'common',
  7: 'rare',
  8: 'rare',
  9: 'legendary',
  10: 'legendary'
};
const allHeroes = [
  {
    id: 1,
    name: "Hannibal Barca",
    image: "images/heroes/hannibal.png",
    hp: 400,
    maxHp: 400,
    attack: 50,
    attackLines: ["Forward! For Carthage!", "No mountain can stop me!"],
    hurtLines: ["An elephant stepped on me...", "They'll pay for that!"],
    special: {
      name: "Elephant Charge",
      damage: 100,
      description: "üêò Deal medium damage and stomp the enemy!"
    },
    ultimate: {
      name: "March Over the Alps",
      description: "üêò Crush enemies for 500 damage after 4 turns!",
      condition: "4_turns_wait",
      used: false
    }
  },
  {
    id: 2,
    name: "Winston Churchill",
    image: "images/heroes/churchill.png",
    hp: 500,
    maxHp: 500,
    attack: 40,
    attackLines: ["We shall fight them on the beaches!", "Never surrender!"],
    hurtLines: ["That's a minor setback!", "Cigar... still intact!"],
    special: {
      name: "Battle Cry",
      buff: { attackBoost: 10 },
      description: "üó£Ô∏è Boost entire team's attack by 10!"
    },
    ultimate: {
      name: "Iron Will",
      description: "üõ°Ô∏è Instantly boost defense massively for 5 turns!",
      condition: "usable_anytime",
      used: false
    }
  },
  {
    id: 3,
    name: "Grigori Rasputin",
    image: "images/heroes/rasputin.png",
    hp: 350,
    maxHp: 350,
    attack: 45,
    attackLines: ["You can't kill me that easily!", "The mystic arts are with me!"],
    hurtLines: ["Is that all you've got?", "Another stab? Yawn."],
    special: {
      name: "Mystic Heal",
      heal: 80,
      description: "‚ú® Heal a teammate for 80 HP!"
    },
    ultimate: {
      name: "Unkillable",
      description: "üîÆ Revive once with 50% HP upon death!",
      condition: "on_death",
      used: false
    }
  },
  {
    id: 4,
    name: "Napoleon Bonaparte",
    image: "images/heroes/napoleon.png",
    hp: 420,
    maxHp: 420,
    attack: 55,
    attackLines: ["Size doesn't matter!", "Charge!"],
    hurtLines: ["Retreat... tactically!", "I'll be back!"],
    special: { name: "Short King Power", description: "Next attack deals double damage." },
    ultimate: { name: "Grande Arm√©e Stampede", description: "Summon a giant army ‚Äî deals 400 team-wide damage." }
  },
  {
    id: 5,
    name: "King Louis XVI",
    image: "images/heroes/louisxvi.webp",
    hp: 350,
    maxHp: 350,
    attack: 35,
    attackLines: ["Tax them all!", "Cake solves everything!"],
    hurtLines: ["Uncool, dude!", "Is my head still attached?"],
    special: { name: "Royal Taxation", description: "Drain 20 HP from all enemies." },
    ultimate: { name: "Let Them Eat Cake", description: "Stun all enemies for 1 turn while they feast." }
  },
  {
    id: 6,
    name: "Otto von Bismarck",
    image: "images/heroes/bismarck.png",
    hp: 470,
    maxHp: 470,
    attack: 50,
    attackLines: ["It‚Äôs just pragmatism!", "For Germany!"],
    hurtLines: ["I expected that.", "Tough negotiations."],
    special: { name: "Realpolitik", description: "Steal a buff from an enemy." },
    ultimate: { name: "Unification Strike", description: "Massive 600 damage combo from all German states." }
  },
  {
    id: 7,
    name: "Kaiser Wilhelm II",
    image: "images/heroes/kaiser.png",
    hp: 440,
    maxHp: 440,
    attack: 45,
    attackLines: ["Mustache power!", "Charge!"],
    hurtLines: ["That's rude!", "Unacceptable!"],
    special: { name: "Mustache Twirl", description: "Confuse an enemy (50% miss chance)." },
    ultimate: { name: "Schlieffen Plan Blitz", description: "Attack 3 random enemies for 300 damage each." }
  },
  {
    id: 8,
    name: "Tsar Nicholas II",
    image: "images/heroes/tsar.png",
    hp: 400,
    maxHp: 400,
    attack: 40,
    attackLines: ["For Mother Russia!", "The people love me... right?"],
    hurtLines: ["Not again...", "Where‚Äôs Rasputin when you need him?"],
    special: { name: "Romanov Resilience", description: "Small heal and defense buff." },
    ultimate: { name: "Bloody Sunday", description: "Deal massive morale damage (-30% enemy attack for 3 turns)." }
  },
  {
    id: 9,
    name: "Robespierre",
    image: "images/heroes/robespierre.png",
    hp: 380,
    maxHp: 380,
    attack: 45,
    attackLines: ["For the Revolution!", "Let the terror commence!"],
    hurtLines: ["I am incorruptible!", "Not even fear can stop me!"],
    special: { name: "Committee of Public Safety", description: "Boost allies' attack by 20% for 2 turns." },
    ultimate: { name: "Reign of Terror", description: "Inflict bleeding on all enemies (-10% HP per turn for 3 turns)." }
  },
  {
    id: 10,
    name: "King George III",
    image: "images/bosses/kinggeorge.png",
    hp: 450,
    maxHp: 450,
    attack: 40,
    attackLines: ["Tax them all!", "Long live the King!"],
    hurtLines: ["Uncool, dude!", "Where‚Äôs my crown?"],
    special: { name: "Taxation Without Representation", description: "Weaken enemy defenses for 3 turns." },
    ultimate: { name: "Royal Madness", description: "Confuse all enemies (50% miss chance)." }
  },
  {
    id: 11,
    name: "Joseph Stalin",
    image: "images/heroes/stalin.png",
    hp: 520,
    maxHp: 520,
    attack: 50,
    attackLines: ["Victory through strength!", "The party leads!"],
    hurtLines: ["Comrade, this is but a scratch.", "Glory to the Motherland!"],
    special: { name: "Purges", description: "Remove buffs from all enemies." },
    ultimate: { name: "Five-Year Plan", description: "Massive team buff (+20% attack and defense for 3 turns)." }
  },
  {
    id: 12,
    name: "Adolf Hitler",
    image: "images/heroes/hitler.png",
    hp: 400,
    maxHp: 400,
    attack: 55,
    attackLines: ["Victory will be ours!", "Onward to glory!"],
    hurtLines: ["They'll pay for this!", "No retreat!"],
    special: { name: "Blitzkrieg", description: "Deal quick 1.5x damage to a random enemy." },
    ultimate: { name: "Operation Barbarossa", description: "Heavy damage to multiple enemies but weakens own defense." }
  },
  {
    id: 13,
    name: "Fidel Castro",
    image: "images/heroes/castro.png",
    hp: 420,
    maxHp: 420,
    attack: 48,
    attackLines: ["Viva la revoluci√≥n!", "Cuba will prevail!"],
    hurtLines: ["Still fighting!", "Is that all you've got?"],
    special: { name: "Revolutionary Fire", description: "Burn enemies (take 5% extra damage per hit for 2 turns)." },
    ultimate: { name: "Cuban Missile Crisis", description: "Force enemies to skip a turn out of panic." }
  },
  {
    id: 14,
    name: "Woodrow Wilson",
    image: "images/heroes/wilson.png",
    hp: 470,
    maxHp: 470,
    attack: 42,
    attackLines: ["Peace without victory!", "Let's make the world safe!"],
    hurtLines: ["That's not very peaceful!", "Democracy will endure!"],
    special: { name: "Fourteen Points", description: "Heal allies slightly and reduce enemy attack power." },
    ultimate: { name: "League of Nations", description: "Attempt to stun all enemies (50% success rate)." }
  },
  {
    id: 15,
    name: "Franklin D. Roosevelt",
    image: "images/heroes/fdr.png",
    hp: 500,
    maxHp: 500,
    attack: 45,
    attackLines: ["The only thing to fear is fear itself!", "Victory through unity!"],
    hurtLines: ["This will not deter us!", "The people will endure!"],
    special: { name: "New Deal", description: "Heal team and provide shields." },
    ultimate: { name: "Arsenal of Democracy", description: "Massively boost team attack and defense for 3 turns." }
  }
];

        // Game Data
        const levels = [
            {
                id: 1,
                title: "The American Revolution",
                description: "The American colonies are fighting for independence from Great Britain. King George III has imposed unfair taxes, and the colonists have had enough!",
                background: "#e8e4d5",
                characters: [
                    { id: "colonist", name: "American Colonist", image: "/api/placeholder/150/200", health: 100, special: "Tea Party", specialDesc: "Throws tea into the harbor for extra damage!" },
                    { id: "washington", name: "George Washington", image: "/api/placeholder/150/200", health: 90, special: "Cherry Tree Chop", specialDesc: "Cannot tell a lie, but can deal massive damage!" }
                ],
                enemy: { name: "British Redcoat", image: "/api/placeholder/150/200", health: 100, special: "Taxation" },
                unlocked: true,
                completed: false,
                rewards: ["Dude, uncool flag", "Tea Party Achievement"],
                stars: 3
            },
            {
                id: 2,
                title: "The French Revolution",
                description: "The French people are rising up against the monarchy. Louis XVI and Marie Antoinette are living in luxury while the common people starve.",
                background: "#e8d5d5",
                characters: [
                    { id: "revolutionary", name: "Revolutionary", image: "/api/placeholder/150/200", health: 100, special: "Vive la R√©volution", specialDesc: "Raises a flag that boosts attack damage!" },
                    { id: "robespierre", name: "Robespierre", image: "/api/placeholder/150/200", health: 90, special: "Reign of Terror", specialDesc: "Intimidates enemies with revolutionary fervor!" }
                ],
                enemy: { name: "Louis XVI", image: "/api/placeholder/150/200", health: 110, special: "Royal Decree" },
                unlocked: false,
                completed: false,
                rewards: ["Guillotine Model", "Let Them Eat Cake Recipe"],
                stars: 6
            },
            {
                id: 3,
                title: "The American Civil War",
                description: "The United States is divided over the issue of slavery. The Union and Confederacy are engaged in a bitter conflict that will determine the future of the nation.",
                background: "#d5e8d5",
                characters: [
                    { id: "union", name: "Union Soldier", image: "/api/placeholder/150/200", health: 100, special: "Northern Industry", specialDesc: "Uses industrial might for a powerful attack!" },
                    { id: "lincoln", name: "Abraham Lincoln", image: "/api/placeholder/150/200", health: 90, special: "Emancipation", specialDesc: "Frees the slaves and bolsters morale!" }
                ],
                enemy: { name: "Confederate Soldier", image: "/api/placeholder/150/200", health: 120, special: "Southern Strategy" },
                unlocked: false,
                completed: false,
                rewards: ["Lincoln's Hat", "Emancipation Proclamation"],
                stars: 7
            },
            {
                id: 4,
                title: "World War I",
                description: "The assassination of Archduke Franz Ferdinand has triggered a global conflict. The Central Powers and the Allies are locked in trench warfare across Europe.",
                background: "#d5d5e8",
                characters: [
                    { id: "allied", name: "Allied Soldier", image: "/api/placeholder/150/200", health: 100, special: "Over the Top", specialDesc: "Charges from the trench for a desperate attack!" },
                    { id: "tank", name: "British Tank", image: "/api/placeholder/150/200", health: 120, special: "Breakthrough", specialDesc: "Crushes through enemy lines!" }
                ],
                enemy: { name: "German Soldier", image: "/api/placeholder/150/200", health: 130, special: "Mustard Gas" },
                unlocked: false,
                completed: false,
                rewards: ["Trench Warfare Guide", "Franz Ferdinand's Glasses"],
                stars: 8
            },
            {
                id: 5,
                title: "The Cold War",
                description: "After World War II, tensions between the United States and Soviet Union have created a new kind of conflict. The world lives under the threat of nuclear annihilation.",
                background: "#e8e8d5",
                characters: [
                    { id: "spy", name: "American Agent", image: "/api/placeholder/150/200", health: 100, special: "Espionage", specialDesc: "Gathers intel for a precise strike!" },
                    { id: "reagan", name: "Ronald Reagan", image: "/api/placeholder/150/200", health: 90, special: "Star Wars Defense", specialDesc: "Uses advanced technology to block attacks!" }
                ],
                enemy: { name: "Soviet Agent", image: "/api/placeholder/150/200", health: 140, special: "KGB Tactics" },
                unlocked: false,
                completed: false,
                rewards: ["Nuclear Button (Fake)", "Berlin Wall Fragment"],
                stars: 9
            },
            {
                id: 6,
                title: "The Russian Revolution",
                description: "The Russian people are rebelling against Tsar Nicholas II. The Bolsheviks, led by Vladimir Lenin, are promising peace, bread, and land.",
                background: "#e8d5e8",
                characters: [
                    { id: "bolshevik", name: "Bolshevik", image: "/api/placeholder/150/200", health: 100, special: "Workers Unite", specialDesc: "Rallies comrades for a combined attack!" },
                    { id: "lenin", name: "Vladimir Lenin", image: "/api/placeholder/150/200", health: 90, special: "Revolution", specialDesc: "Incites the masses to rise up!" }
                ],
                enemy: { name: "Tsar Nicholas II", image: "/api/placeholder/150/200", health: 150, special: "Imperial Guard" },
                unlocked: false,
                completed: false,
                rewards: ["Lenin's Cap", "Oversimplified Hammer & Sickle"],
                stars: 10
            },
            {
                id: 7,
                title: "World War II",
                description: "Germany's invasion of Poland has sparked another global conflict. The Axis and Allied powers are fighting across Europe, Africa, and the Pacific.",
                background: "#d5e8e8",
                characters: [
                    { id: "allied-wwii", name: "Allied Commander", image: "/api/placeholder/150/200", health: 100, special: "Allied Bombing", specialDesc: "Calls in air support for massive damage!" },
                    { id: "churchill", name: "Winston Churchill", image: "/api/placeholder/150/200", health: 110, special: "Blood, Toil, Tears", specialDesc: "Inspires with a speech that boosts attacks!" }
                ],
                enemy: { name: "Axis Commander", image: "/api/placeholder/150/200", health: 160, special: "Blitzkrieg" },
                unlocked: false,
                completed: false,
                rewards: ["Oversimplified Churchill Cigar", "Victory Medal"],
                stars: 11
            },
            {
                id: 8,
                title: "The Napoleonic Wars",
                description: "Napoleon Bonaparte has risen to power in France and is now expanding his empire across Europe. A coalition of European powers is forming to stop him.",
                background: "#d5e8e8",
                characters: [
                    { id: "allied-wwii", name: "Allied Commander", image: "/api/placeholder/150/200", health: 100, special: "Allied Bombing", specialDesc: "Calls in air support for massive damage!" },
                    { id: "churchill", name: "Winston Churchill", image: "/api/placeholder/150/200", health: 110, special: "Blood, Toil, Tears", specialDesc: "Inspires with a speech that boosts attacks!" }
                ],
                enemy: { name: "Axis Commander", image: "/api/placeholder/150/200", health: 160, special: "Blitzkrieg" },
                unlocked: false,
                completed: false,
                rewards: ["Oversimplified Churchill Cigar", "Victory Medal"],
                stars: 11
            },
            {
                id: 9,
                title: "The Vietnam War",
                description: "The United States is intervening in Vietnam to prevent the spread of communism in Southeast Asia. The Viet Cong are fighting a guerrilla war against American forces.",
                background: "#d5e8d5",
                characters: [
                    { id: "us-soldier", name: "US Soldier", image: "/api/placeholder/150/200", health: 100, special: "Air Support", specialDesc: "Calls in helicopters for a devastating attack!" },
                    { id: "mcnamara", name: "Robert McNamara", image: "/api/placeholder/150/200", health: 90, special: "Strategic Planning", specialDesc: "Uses statistics to find enemy weaknesses!" }
                ],
                enemy: { name: "Viet Cong", image: "/api/placeholder/150/200", health: 170, special: "Tunnel Networks" },
                unlocked: false,
                completed: false,
                rewards: ["Jungle Survival Guide", "Peace Symbol"],
                stars: 12
            },
            {
                id: 10,
                title: "The Cuban Missile Crisis",
                description: "The world stands on the brink of nuclear war as the United States discovers Soviet missiles in Cuba. President Kennedy and Premier Khrushchev must find a diplomatic solution.",
                background: "#e8d5d5",
                characters: [
                    { id: "kennedy", name: "JFK", image: "/api/placeholder/150/200", health: 100, special: "Naval Blockade", specialDesc: "Cuts off enemy supply lines!" },
                    { id: "diplomat", name: "US Diplomat", image: "/api/placeholder/150/200", health: 90, special: "Negotiation", specialDesc: "Attempts to resolve conflict peacefully!" }
                ],
                enemy: { name: "Nikita Khrushchev", image: "/api/placeholder/150/200", health: 180, special: "Nuclear Threat" },
                unlocked: false,
                completed: false,
                rewards: ["Hot Line Telephone", "Map of Cuba"],
                stars: 13
            }
        ];

        const shopItems = [
  { id: 1, name: "The Bucket", price: 10, image: "images/shop/bucket.png", description: "A legendary bucket from history!" },
  { id: 2, name: "OOOoOoh NOoOoOo!", price: 12, image: "images/shop/ohno.png", description: "'Louis, you can't just rot and eat cake all day.'" },
  { id: 3, name: "This Enraged Bob...", price: 8, image: "images/shop/punishedseverely.png", description: "...who punished him severely." },
  { id: 4, name: "STEVE", price: 15, image: "images/shop/steve.png", description: "Steve just wants to vibe." },
  { id: 5, name: "Emu", price: 10, image: "images/shop/emu.png", description: "Stronger than Australia" },
  { id: 6, name: "Tsar's Crown", price: 18, image: "images/shop/crown.png", description: "Heavy is the head..." },
  { id: 7, name: "Five Year Plan Poster", price: 14, image: "images/shop/fiveyearplan.png", description: "Motivate your comrades." }
];


        // Achievements
        const achievements = [
            {
                id: "first-victory",
                name: "First Victory",
                description: "Win your first battle",
                icon: "üèÜ",
                unlocked: false
            },
            {
                id: "collector",
                name: "History Collector",
                description: "Collect 5 rewards",
                icon: "üè∫",
                unlocked: false
            },
            {
                id: "spender",
                name: "History Patron",
                description: "Spend 50 stars in the shop",
                icon: "üí∞",
                unlocked: false
            },
            {
                id: "master-tactician",
                name: "Master Tactician",
                description: "Win a battle without taking damage",
                icon: "üß†",
                unlocked: false
            },
            {
                id: "comeback-kid",
                name: "Comeback Kid",
                description: "Win a battle with less than 20% health",
                icon: "üí™",
                unlocked: false
            },
            {
                id: "history-master",
                name: "History Master",
                description: "Complete all levels",
                icon: "üåü",
                unlocked: false
            },
            {
                id: "special-master",
                name: "Special Master",
                description: "Use special move 20 times",
                icon: "‚ö°",
                unlocked: false
            },
            {
                id: "healer",
                name: "Field Medic",
                description: "Heal a total of 500 HP",
                icon: "‚ù§Ô∏è",
                unlocked: false
            }
        ];

        // Game state
        let gameState = {
            currentLevel: null,
            playerCharacter: null,
            playerHealth: 100,
            enemyHealth: 100,
            completedLevels: 0,
            totalVictories: 0,
            stars: 0,
            unlockedRewards: [],
            playerStats: {
                specialUsed: 0,
                totalHealing: 0,
                moneySpent: 0
            },
            achievements: [],
            ownedItems: [],
            soundEnabled: true
        };

        // DOM elements
        const levelSelect = document.getElementById('level-select');
        const battleArea = document.getElementById('battle-area');
        const levelTitle = document.getElementById('level-title');
        const levelDescription = document.getElementById('level-description');
        const levelIntro = document.getElementById('level-intro');
        const characterSelect = document.getElementById('character-select');
        const startBattle = document.getElementById('start-battle');
        const battleStage = document.getElementById('battle-stage');
        const battleActions = document.getElementById('battle-actions');
        const battleLog = document.getElementById('battle-log');
        const playerCharacter = document.getElementById('player-character');
        const enemyCharacter = document.getElementById('enemy-character');
        const playerHealthBar = document.getElementById('player-health');
        const enemyHealthBar = document.getElementById('enemy-health');
        const playerName = document.getElementById('player-name');
        const enemyName = document.getElementById('enemy-name');
        const playerSpecialDesc = document.getElementById('player-special-desc');
        const backBtn = document.getElementById('back-btn');
        const rewardScreen = document.getElementById('reward-screen');
        const rewardsList = document.getElementById('rewards-list');
        const levelStars = document.getElementById('level-stars');
        const closeReward = document.getElementById('close-reward');
        const rewardsGallery = document.getElementById('rewards-gallery');
        const galleryList = document.getElementById('gallery-list');
        const showRewards = document.getElementById('show-rewards');
        const closeGallery = document.getElementById('close-gallery');
        const completedLevelsElement = document.getElementById('completed-levels');
        const totalVictoriesElement = document.getElementById('total-victories');
        const playerStarsElement = document.getElementById('player-stars');
        const resetGame = document.getElementById('reset-game');
        const achievementsScreen = document.getElementById('achievements-screen');
        const achievementsGrid = document.getElementById('achievements-grid');
        const showAchievements = document.getElementById('show-achievements');
        const closeAchievements = document.getElementById('close-achievements');
        const shopScreen = document.getElementById('shop-screen');
        const shopItemsContainer = document.getElementById('shop-items');
        const shopStars = document.getElementById('shop-stars');
        const showShop = document.getElementById('show-shop');
        const closeShop = document.getElementById('close-shop');
        const soundToggle = document.getElementById('sound-toggle');
        const itemBtn = document.getElementById('item-btn');

        shopItemsContainer.innerHTML = '';

        // Sound effects (using AudioContext for browser compatibility)
        let audioContext;
        const initAudio = () => {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        };

        const playSound = (type) => {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'attack':
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.value = 220;
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'special':
                    oscillator.type = 'sine';
                    oscillator.frequency.value = 440;
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.frequency.exponentialRampToValueAtTime(880, audioContext.currentTime + 0.5);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    oscillator.stop(audioContext.currentTime + 0.5);
                    break;
                case 'heal':
                    oscillator.type = 'sine';
                    oscillator.frequency.value = 660;
                    gainNode.gain.value = 0.2;
                    oscillator.start();
                    oscillator.frequency.exponentialRampToValueAtTime(880, audioContext.currentTime + 0.3);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                    oscillator.stop(audioContext.currentTime + 0.4);
                    break;
                case 'victory':
                    const notes = [523.25, 659.25, 783.99, 1046.50];
                    let time = audioContext.currentTime;
                    for (let i = 0; i < notes.length; i++) {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = notes[i];
                        gain.gain.value = 0.3;
                        osc.start(time);
                        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.3);
                        osc.stop(time + 0.3);
                        time += 0.2;
                    }
                    break;
                case 'defeat':
                    const defeatNotes = [440, 415.30, 392, 349.23];
                    let defeatTime = audioContext.currentTime;
                    for (let i = 0; i < defeatNotes.length; i++) {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = defeatNotes[i];
                        gain.gain.value = 0.3;
                        osc.start(defeatTime);
                        gain.gain.exponentialRampToValueAtTime(0.01, defeatTime + 0.3);
                        osc.stop(defeatTime + 0.3);
                        defeatTime += 0.2;
                    }
                    break;
                case 'unlock':
                    oscillator.type = 'sine';
                    oscillator.frequency.value = 783.99;
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.frequency.exponentialRampToValueAtTime(1046.50, audioContext.currentTime + 0.3);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                    oscillator.stop(audioContext.currentTime + 0.4);
                    break;
            }
        };
        
        function checkWinOnLoad() {
  const params = new URLSearchParams(window.location.search);
  const levelWon = parseInt(params.get('levelWon'));

  if (!isNaN(levelWon)) {
    console.log(`Player won Level ${levelWon}!`);

    // Unlock the next level
    unlockNextLevel(levelWon);

    // Give rewards
giveLevelRewards(levelWon);

// Sync rewards from localStorage to gameState
let rewards = JSON.parse(localStorage.getItem('playerRewards')) || [];
gameState.unlockedRewards = rewards;
saveGame(); // Save updated gameState
updatePlayerStatsUI();
    // üéâ Show Victory Banner
    showVictoryBanner();
  }
}
function updatePlayerStatsUI() {
  completedLevelsElement.textContent = gameState.completedLevels;
  totalVictoriesElement.textContent = gameState.totalVictories;
  playerStarsElement.textContent = gameState.stars;
  shopStars.textContent = gameState.stars;

  const progress = (gameState.completedLevels / 10) * 100;
    document.getElementById('completed-progress').style.width = progress + '%';
}

function showVictoryBanner() {
  const banner = document.getElementById('victory-banner');
  banner.style.display = 'block';

  // Hide banner after 3s
  setTimeout(() => {
    banner.style.display = 'none';
  }, 3000);

  // Show reward chest after slight delay
  setTimeout(() => {
    showRewardChest();
  }, 1000);
}
function showRewardChest() {
  const params = new URLSearchParams(window.location.search);
  const levelWon = parseInt(params.get('levelWon'));

  const chest = document.getElementById('reward-chest');
  const chestIcon = document.getElementById('chest-icon');
  const rewardText = document.getElementById('reward-text');

  if (!isNaN(levelWon)) {
    const level = levels.find(l => l.id === levelWon);
    if (!level) {
      console.error("Level not found");
      return;
    }

    chest.style.display = 'block';
    rewardText.textContent = `Click to Open Your Rewards!`;
    rewardText.style.display = 'none'; // Hidden until open

    chest.dataset.levelWon = levelWon; // Remember which level this is
  }
}

function launchStarFlyUp(starCount = 5) {
  const container = document.getElementById('star-flyup-container');
  container.innerHTML = ''; // Clear any previous stars

  for (let i = 0; i < starCount; i++) {
    const star = document.createElement('div');
    star.textContent = "‚≠ê";
    star.style.position = 'absolute';
    star.style.left = `${50 + Math.random() * 20 - 10}%`; // Around center
    star.style.top = '80%'; // Near bottom of screen
    star.style.fontSize = `${Math.random() * 24 + 24}px`;
    star.style.opacity = 1;
    star.style.transition = `all ${Math.random() * 1 + 1}s ease-out`;

    container.appendChild(star);

    // Launch star after a very tiny delay
    setTimeout(() => {
      star.style.top = `${Math.random() * 30 + 10}%`;
      star.style.left = `${50 + Math.random() * 40 - 20}%`;
      star.style.opacity = 0;
      star.style.transform = 'rotate(720deg)';
    }, 50 * i);
  }

  // Remove all stars after animation finishes
  setTimeout(() => {
    container.innerHTML = '';
  }, 3000);
}
let unlockedHeroes = JSON.parse(localStorage.getItem('unlockedHeroes')) || [1, 2, 3];

function saveUnlockedHeroes() {
    localStorage.setItem('unlockedHeroes', JSON.stringify(unlockedHeroes));
}

const unlockOrder = [4, 5, 6, 7, 8, 9, 11, 13, 15];

function unlockNextHero() {
    const completedLevels = parseInt(document.getElementById('completed-levels').textContent, 10);
    if (completedLevels <= unlockOrder.length) {
        const newHeroId = unlockOrder[completedLevels - 1];
        if (!unlockedHeroes.includes(newHeroId)) {
            unlockedHeroes.push(newHeroId);
            saveUnlockedHeroes();
            showNewHeroPopup(newHeroId);
            generateCharacterGallery();
        }
    }
}
function showNewHeroPopup(heroId) {
    const hero = allHeroes.find(h => h.id === heroId);
    if (!hero) return;

    const banner = document.createElement('div');
    banner.id = 'new-hero-banner';
    banner.style = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotateY(90deg);
        background: #fff8dc;
        color: #2E282A;
        border: 4px solid gold;
        border-radius: 20px;
        padding: 30px;
        width: 300px;
        text-align: center;
        font-size: 1.1em;
        font-weight: bold;
        z-index: 10000;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        animation: flipInNew 0.6s ease forwards;
    `;

    banner.innerHTML = `
        <h2 style="color: goldenrod;">üéâ New Hero Unlocked!</h2>
        <img src="${hero.image}" alt="${hero.name}" style="width:100px;height:120px;margin-top:10px;border:3px solid goldenrod;border-radius:10px;">
        <h3 style="margin-top:10px;">${hero.name}</h3>
        <p style="margin-top:5px;font-size:0.9em;">‚ú® Special: ${hero.special?.name || 'Unknown'}</p>
    `;

    document.body.appendChild(banner);

    setTimeout(() => {
        banner.remove();
    }, 4000);
}

function generateCharacterGallery(sortBy = 'name') {
    const charactersList = document.getElementById('characters-list');
    charactersList.innerHTML = '';

    let sortedHeroes = [...allHeroes];

    // Sorting logic
    if (sortBy === 'name') {
        sortedHeroes.sort((a, b) => a.name.localeCompare(b.name));
    } else if (sortBy === 'rarity') {
        sortedHeroes.sort((a, b) => a.id - b.id); // fallback for now
    } else if (sortBy === 'hp') {
        sortedHeroes.sort((a, b) => (b.hp || 0) - (a.hp || 0));
    }

    sortedHeroes.forEach(hero => {
        const heroCard = document.createElement('div');
        heroCard.className = 'reward-item'; // base class

        const isUnlocked = unlockedHeroes.includes(hero.id);

        if (isUnlocked) {
            heroCard.classList.add('unlocked'); // ‚ú® Glow if unlocked!
            heroCard.innerHTML = `
                <img src="${hero.image}" alt="${hero.name}" style="width:80px;height:100px;object-fit:contain;">
                <h3>${hero.name}</h3>
            `;
            heroCard.addEventListener('click', function() {
                showHeroProfile(hero.id);
            });
        } else {
            heroCard.classList.add('achievement-locked'); // greyed out if locked
            heroCard.innerHTML = `
                <div style="position: relative;">
                    <img src="${hero.image}" alt="${hero.name}" style="width:80px;height:100px;object-fit:contain;">
                    <div class="lock-icon">üîí</div>
                </div>
                <h3>${hero.name}</h3>
            `;
        }

        charactersList.appendChild(heroCard);
    });
}

// --- Existing Reward Flow Patch --- //

// Make sure when closing reward chest, we unlock hero
if (closeReward) {
    closeReward.addEventListener('click', () => {
        unlockNextHero();
    });
}
function openChest() {
  const chestIcon = document.getElementById('chest-icon');
  const rewardText = document.getElementById('reward-text');
  const levelWon = parseInt(document.getElementById('reward-chest').dataset.levelWon);

  const level = levels.find(l => l.id === levelWon);
  if (!level) {
    console.error("Level not found for rewards");
    return;
  }

  // Stop the chest shaking animation
  chestIcon.style.animation = 'none';

  // Show victory sparkle
  chestIcon.textContent = "üéâ";
  launchStarFlyUp(level.stars);
  // Award the stars
  gameState.stars += level.stars;
  saveGame();
  updateCurrencyDisplay();

  // Add level rewards to unlocked rewards
  if (level.rewards && Array.isArray(level.rewards)) {
    level.rewards.forEach(reward => {
      if (!gameState.unlockedRewards.includes(reward)) {
        gameState.unlockedRewards.push(reward);
      }
    });
  }
  saveGame();

  // Show reward text
  rewardText.innerHTML = `
    <p>‚≠ê Earned ${level.stars} Stars!</p>
    <p>üéÅ Rewards Unlocked:</p>
    <ul>${level.rewards.map(r => `<li>${r}</li>`).join('')}</ul>
  `;
  rewardText.style.display = 'block';

  // üéâ Launch confetti!
  launchConfetti();

  // Auto-hide chest after a few seconds
  setTimeout(() => {
    document.getElementById('reward-chest').style.display = 'none';
    renderRewardsGallery();
  }, 5000);
}

function enterGame() {
      document.getElementById('titleScreen').style.display = 'none';
      document.getElementById('mainGame').style.display = 'block';
    }

        // Save and load functions
        function saveGame() {
            localStorage.setItem('oversimplifiedGame', JSON.stringify({
                levels: levels,
                gameState: gameState,
                achievements: achievements
            }));
        }

        function loadGame() {
            const savedGame = localStorage.getItem('oversimplifiedGame');
            if (savedGame) {
                const parsedGame = JSON.parse(savedGame);
                // Update levels with saved data
                if (parsedGame.levels) {
                    for (let i = 0; i < parsedGame.levels.length; i++) {
                        if (i < levels.length) {
                            levels[i].unlocked = parsedGame.levels[i].unlocked;
                            levels[i].completed = parsedGame.levels[i].completed;
                        }
                    }
                }
                
                // Update game state
                if (parsedGame.gameState) {
                    gameState.completedLevels = parsedGame.gameState.completedLevels || 0;
                    gameState.totalVictories = parsedGame.gameState.totalVictories || 0;
                    gameState.stars = parsedGame.gameState.stars || 0;
                    gameState.unlockedRewards = parsedGame.gameState.unlockedRewards || [];
                    gameState.playerStats = parsedGame.gameState.playerStats || {
                        specialUsed: 0,
                        totalHealing: 0,
                        moneySpent: 0
                    };
                    gameState.ownedItems = parsedGame.gameState.ownedItems || [];
                    gameState.soundEnabled = parsedGame.gameState.soundEnabled !== undefined ? 
                        parsedGame.gameState.soundEnabled : true;
                }
                
                // Update achievements
                if (parsedGame.achievements) {
                    for (let i = 0; i < parsedGame.achievements.length; i++) {
                        if (i < achievements.length) {
                            achievements[i].unlocked = parsedGame.achievements[i].unlocked;
                        }
                    }
                }
                
                // Update sound toggle button
                if (gameState.soundEnabled) {
                    soundToggle.textContent = 'üîä Sound: ON';
                } else {
                    soundToggle.textContent = 'üîá Sound: OFF';
                }
            }
            
            // Make sure at least the first level is unlocked
            levels[0].unlocked = true;
        }

        function clearGame() {
            localStorage.clear();
            // Reset levels
            levels.forEach((level, index) => {
                level.unlocked = index === 0; // Only first level unlocked
                level.completed = false;
            });
            
            // Reset game state
            gameState.completedLevels = 0;
            gameState.totalVictories = 0;
            gameState.stars = 0;
            gameState.unlockedRewards = [];
            gameState.playerStats = {
                specialUsed: 0,
                totalHealing: 0,
                moneySpent: 0
            };
            gameState.ownedItems = [];
            
            // Reset achievements
            achievements.forEach(achievement => {
                achievement.unlocked = false;
            });
            
            saveGame();
        }
       
function openHeroProfile(hero) {
  document.getElementById('profile-name').textContent = hero.name;
  document.getElementById('profile-image').src = hero.image;
  document.getElementById('profile-hp').textContent = `‚ù§Ô∏è HP: ${hero.maxHp}`;
  document.getElementById('profile-special').textContent = `‚≠ê Special: ${hero.special.name}`;
  document.getElementById('profile-rarity').textContent = hero.rarity || "‚≠ê Common";

  document.getElementById('hero-profile').classList.remove('hidden');
  document.getElementById('upgrade-hero').onclick = function() {
  upgradeHero(hero);
};
}
function upgradeHero(hero) {
  hero.upgradeLevel = (hero.upgradeLevel || 0) + 1;

  const baseStars = (hero.rarity.match(/‚≠ê/g) || []).length;
  const newTotalStars = baseStars + hero.upgradeLevel;

  let newRarity = '';
  for (let i = 0; i < newTotalStars; i++) {
    newRarity += '‚≠ê';
  }

  if (newTotalStars >= 5) {
    newRarity += " Mythical";
  } else if (newTotalStars >= 4) {
    newRarity += " Legendary";
  } else if (newTotalStars >= 3) {
    newRarity += " Rare";
  } else {
    newRarity += " Common";
  }

  hero.rarity = newRarity;

  // Save back to storage if needed (optional)
  saveUnlockedHeroes();

  // Refresh profile display
  openHeroProfile(hero);

  // Optional: Little animation or popup
  alert(`${hero.name} has been upgraded! Now ${hero.rarity}`);
}
function saveUnlockedHeroes() {
  const heroesInGallery = [...document.querySelectorAll('#characters-list .reward-item')];
  const savedHeroes = heroesInGallery.map(card => {
    return {
      name: card.querySelector('h4').textContent,
      image: card.querySelector('img').src,
      maxHp: parseInt(card.querySelector('p:nth-of-type(2)').textContent.replace(/\D/g,'')),
      special: { name: card.querySelector('p:nth-of-type(3)').textContent.replace('‚≠ê Special: ', '') },
      rarity: card.querySelector('p:nth-of-type(1)').textContent,
      upgradeLevel: (card.dataset.upgradeLevel) ? parseInt(card.dataset.upgradeLevel) : 0
    };
  });
  localStorage.setItem('unlockedHeroes', JSON.stringify(savedHeroes));
}

        // Render functions
        function renderLevelSelect() {
            const unlockedLevels = JSON.parse(localStorage.getItem('unlockedLevels')) || [1]; // Default Level 1 unlocked

            // Go through each level card
            const cards = document.querySelectorAll('#level-select .level-card');

            cards.forEach((card, index) => {
                const levelId = index + 1; // Cards are in order (Level 1 is card 0 + 1)

                if (unlockedLevels.includes(levelId)) {
                // Level is unlocked
                card.classList.remove('locked');
                card.querySelector('button').disabled = false;
                card.querySelector('button').textContent = "Play";
                card.style.opacity = '1';
                } else {
                // Level is locked
                card.classList.add('locked');
                card.querySelector('button').disabled = true;
                card.querySelector('button').textContent = "Locked üîí";
                card.style.opacity = '0.5';
                }
            });
        }

        function renderStats() {
            completedLevelsElement.textContent = gameState.completedLevels;
            totalVictoriesElement.textContent = gameState.totalVictories;
            playerStarsElement.textContent = gameState.stars;
        }

        function renderRewardsGallery() {
            galleryList.innerHTML = '';
            
            if (gameState.unlockedRewards.length === 0) {
                galleryList.innerHTML = '<p>You have not unlocked any rewards yet. Complete levels to earn rewards!</p>';
                return;
            }
            
            gameState.unlockedRewards.forEach(reward => {
                const rewardItem = document.createElement('div');
                rewardItem.classList.add('reward-item');
                rewardItem.innerHTML = `
                    <div class="reward-icon">üèÜ</div>
                    <div>${reward}</div>
                `;
                galleryList.appendChild(rewardItem);
            });
        }

        function renderAchievements() {
            achievementsGrid.innerHTML = '';
            
            achievements.forEach(achievement => {
                const achievementItem = document.createElement('div');
                achievementItem.classList.add('achievement-item');
                
                if (!achievement.unlocked) {
                    achievementItem.classList.add('achievement-locked');
                }
                
                achievementItem.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-name">${achievement.name}</div>
                    <div class="achievement-desc">${achievement.description}</div>
                `;
                
                achievementsGrid.appendChild(achievementItem);
            });
        }
        function spawnStars(parent) {
    for (let i = 0; i < 8; i++) { // 8 stars
        const star = document.createElement('div');
        star.className = 'fly-star';
        star.innerText = 'üåü';
        star.style.left = (parent.offsetLeft + parent.offsetWidth / 2) + 'px';
        star.style.top = (parent.offsetTop + parent.offsetHeight / 2) + 'px';
        star.style.position = 'fixed';

        // Random flying directions
        const angle = Math.random() * 2 * Math.PI;
        const distance = 50 + Math.random() * 50;
        star.style.setProperty('--dx', `${Math.cos(angle) * distance}px`);
        star.style.setProperty('--dy', `${Math.sin(angle) * distance}px`);

        document.body.appendChild(star);

        // Remove after animation ends
        setTimeout(() => {
            star.remove();
        }, 1000);
    }
}

        function renderShop() {
    const shopItemsContainer = document.getElementById('shop-items');
    shopItemsContainer.innerHTML = '';
    shopStars.textContent = gameState.stars;
    
    shopItems.forEach(item => {
        const shopItem = document.createElement('div');
        shopItem.classList.add('shop-item');

        const owned = gameState.ownedItems.includes(item.id);

        if (owned) {
            shopItem.classList.add('owned'); // ‚ú® Make it gold and animated if owned
        }
        
        shopItem.innerHTML = `
            <div class="shop-item-image">
                <img src="${item.image}" width="80px" height="80px">
            </div>
            <div class="shop-item-name">${item.name}</div>
            ${item.description ? `<div class="shop-item-desc">${item.description}</div>` : ``}
            <div class="shop-item-price">${item.price} üåü</div>
            ${owned ? '<div class="owned-badge">Owned</div>' : ''}
        `;
        
        const buyButton = document.createElement('button');
        buyButton.classList.add('shop-buy-btn');
        buyButton.textContent = owned ? 'Owned' : 'Buy';

        if (owned || gameState.stars < item.price) {
            buyButton.disabled = true;
        }

        buyButton.addEventListener('click', function() {
            if (gameState.stars >= item.price && !gameState.ownedItems.includes(item.id)) {
                spawnStars(shopItem);
                buyItem(item);
                setTimeout(() => {
            renderShop(); // Delay a bit to let stars finish
        }, 300); // slight delay to not cut off animation
            }
        });

        shopItem.appendChild(buyButton);
        shopItemsContainer.appendChild(shopItem);
    });
}


        function buyItem(itemId) {
  const item = shopItems.find(i => i.id === itemId);
  if (!item) return;

  if (gameState.stars >= item.price) {
    gameState.stars -= item.price;
    if (!gameState.ownedItems) {
      gameState.ownedItems = [];
    }
    gameState.ownedItems.push(item.name);
    saveGame();
    renderShop();
    updatePlayerStatsUI();
    alert(`üéâ You bought ${item.name}!`);

    // üåü Trigger glow effect on bought item
    setTimeout(() => {
      const shopItemsElements = document.querySelectorAll('.shop-item');
      shopItemsElements.forEach(card => {
        if (card.innerHTML.includes(item.name)) {
          card.classList.add('glow');
          setTimeout(() => card.classList.remove('glow'), 1000); // Remove glow after animation
        }
      });
    }, 100); // Slight delay to allow re-rendering
  } else {
    alert("Not enough Stars!");
  }
}


        function launchConfetti() {
  const canvas = document.getElementById('confetti-canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  canvas.style.display = 'block';

  const chest = document.getElementById('reward-chest');
  const rarity = chest.dataset.rarity || 'common';

  let colors = ['#FFC700', '#FF0000', '#2E82FF', '#28A745', '#FF69B4']; // default
  if (rarity === 'rare') {
    colors = ['#00C9A7', '#2E82FF', '#9966FF', '#FFD93D'];
  } else if (rarity === 'legendary') {
    colors = ['#FFD700', '#FF8C00', '#FF4500', '#DA70D6'];
  }

  let confettiPieces = [];
  for (let i = 0; i < 150; i++) {
    confettiPieces.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      size: Math.random() * 8 + 2,
      color: colors[Math.floor(Math.random() * colors.length)],
      speedX: Math.random() * 6 - 3,
      speedY: Math.random() * 5 + 2,
      rotation: Math.random() * 360
    });
  }

  function updateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confettiPieces.forEach(p => {
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.rect(p.x, p.y, p.size, p.size);
      ctx.fill();
      p.x += p.speedX;
      p.y += p.speedY;
      p.rotation += p.speedX;
    });

    confettiPieces = confettiPieces.filter(p => p.y < canvas.height + 20);

    if (confettiPieces.length > 0) {
      requestAnimationFrame(updateConfetti);
    } else {
      canvas.style.display = 'none';
    }
  }

  updateConfetti();
}


        function unlockNextLevel(currentLevelId) {
            let unlockedLevels = JSON.parse(localStorage.getItem('unlockedLevels')) || [1];
            if (!unlockedLevels.includes(currentLevelId + 1)) {
                unlockedLevels.push(currentLevelId + 1);
                localStorage.setItem('unlockedLevels', JSON.stringify(unlockedLevels));
                renderLevelSelect(); // Refresh level cards
            }
        }
        function giveLevelRewards(levelWon) {
            let rewards = JSON.parse(localStorage.getItem('playerRewards')) || [];

            const rewardMap = {
                1: "Unlock Patriot Badge",
                2: "Unlock Meme Cannon",
                3: "Unlock Tactical Dice",
                4: "Unlock Karaoke Medal",
                5: "Unlock Spy Decoder",
                6: "Unlock Revolutionary Poster",
                7: "Unlock Dodge Boots",
                8: "Unlock Fashion Trophy",
                9: "Unlock News Control Badge",
                10: "Unlock Peacekeeper Medal"
            };

            if (rewardMap[levelWon]) {
                rewards.push(rewardMap[levelWon]);
                localStorage.setItem('playerRewards', JSON.stringify(rewards));
                console.log(`üèÖ Reward earned: ${rewardMap[levelWon]}`);
            }
        }
        // Game functions
        function selectLevel(level) {
            hideAllScreens(); // <-- We will create this helper below

            switch (level.id) {
                case 1:
      window.location.href = "American_Revolution.html";
      break;
    case 2:
      window.location.href = "level2.html";
      break;
    case 3:
      window.location.href = "level3.html";
      break;
    case 4:
      window.location.href = "level4.html";
      break;
    case 5:
      window.location.href = "level5.html";
      break;
    case 6:
      window.location.href = "level6.html";
      break;
    case 7:
      window.location.href = "level7.html";
      break;
    case 8:
      window.location.href = "level8.html";
      break;
    case 9:
      window.location.href = "level9.html";
      break;
    case 10:
      window.location.href = "level10.html";
      break;
    default:
      console.error('Level not recognized!');
            }
        }
        function hideAllScreens() {
            const screens = [
                'rhetoric-duel',
                'meme-warfare',
                'grid-battle',
                'karaoke-battle',
                'cold-war-game',
                'startup-pitch',
                'dodgeball',
                'fashion-duel',
                'tv-war',
                'missile-tinder'
            ];
            
            screens.forEach(id => {
                const screen = document.getElementById(id);
                if (screen) {
                screen.style.display = 'none';
                }
            });
        }
// Initialize game
function initGame() {
            console.log('Init Game started');
            loadGame();
            renderLevelSelect();
            renderStats();
            checkWinOnLoad();
            battleArea.classList.add('hidden');
            rewardScreen.classList.add('hidden');
            rewardsGallery.classList.add('hidden');
            achievementsScreen.classList.add('hidden');
            shopScreen.classList.add('hidden');
            levelSelect.classList.remove('hidden');
            // Event listeners
            document.getElementById('apply-sort').addEventListener('click', function() {
  const sortBy = document.getElementById('sort-option').value;
  generateCharacterGallery(sortBy); // ‚úÖ Now it sorts correctly
});


            backBtn.addEventListener('click', function() {
                battleArea.classList.add('hidden');
                levelSelect.classList.remove('hidden');
            });
            
            closeReward.addEventListener('click', function() {
                rewardScreen.classList.add('hidden');
                battleArea.classList.add('hidden');
                levelSelect.classList.remove('hidden');
                renderLevelSelect(); // Update level selection
            });
            
            showRewards.addEventListener('click', function() {
                renderRewardsGallery();
                rewardsGallery.classList.remove('hidden');
            });
            
            closeGallery.addEventListener('click', function() {
                rewardsGallery.classList.add('hidden');
            });
            
            showAchievements.addEventListener('click', function() {
                renderAchievements();
                achievementsScreen.classList.remove('hidden');
            });
            
            closeAchievements.addEventListener('click', function() {
                achievementsScreen.classList.add('hidden');
            });
            
            showShop.addEventListener('click', function() {
                renderShop();
                shopScreen.classList.remove('hidden');
            });
            document.getElementById('close-profile').addEventListener('click', function() {
  document.getElementById('hero-profile').classList.add('hidden');
});

            closeShop.addEventListener('click', function() {
                shopScreen.classList.add('hidden');
            });
            
            resetGame.addEventListener('click', function() {
                resetModal.classList.remove('hidden');
            });
            const showCharacters = document.getElementById('show-characters');
const closeCharacters = document.getElementById('close-characters');

// Open the Characters Gallery
showCharacters.addEventListener('click', function() {
  generateCharacterGallery(); // ‚úÖ Actually generate the heroes
  document.getElementById('characters-gallery').classList.remove('hidden');
});

// Close the Characters Gallery
closeCharacters.addEventListener('click', function() {
  document.getElementById('characters-gallery').classList.add('hidden');
});

            
            soundToggle.addEventListener('click', function() {
                gameState.soundEnabled = !gameState.soundEnabled;
                if (gameState.soundEnabled) {
                    soundToggle.textContent = 'üîä Sound: ON';
                    initAudio();
                } else {
                    soundToggle.textContent = 'üîá Sound: OFF';
                }
                saveGame();
            });
            
            itemBtn.addEventListener('click', function() {
                // Show available items
                if (gameState.ownedItems.length === 0) {
                    addLogEntry("You don't have any items yet. Visit the shop to buy some!");
                    return;
                }
                
                // Create a simple dropdown to select items
                const itemMenu = document.createElement('div');
                itemMenu.style.position = 'absolute';
                itemMenu.style.backgroundColor = 'white';
                itemMenu.style.padding = '10px';
                itemMenu.style.borderRadius = '5px';
                itemMenu.style.boxShadow = '0 0 10px rgba(0,0,0,0.5)';
                itemMenu.style.zIndex = '10';
                itemMenu.style.left = `${itemBtn.offsetLeft}px`;
                itemMenu.style.top = `${itemBtn.offsetTop + itemBtn.offsetHeight}px`;
                
                gameState.ownedItems.forEach(item => {
                    const shopItem = shopItems.find(i => i.id === item);
                    if (!shopItem) return;
                    
                    const itemButton = document.createElement('button');
                    itemButton.textContent = `${shopItem.name} (${shopItem.effect.type}: ${shopItem.effect.value})`;
                    itemButton.style.display = 'block';
                    itemButton.style.width = '100%';
                    itemButton.style.marginBottom = '5px';
                    itemButton.style.padding = '5px';
                    itemButton.style.cursor = 'pointer';
                    
                    itemButton.addEventListener('click', function() {
                        useItem(shopItem);
                        document.body.removeChild(itemMenu);
                    });
                    
                    itemMenu.appendChild(itemButton);
                });
                
                const closeButton = document.createElement('button');
                closeButton.textContent = 'Cancel';
                closeButton.style.display = 'block';
                closeButton.style.width = '100%';
                closeButton.style.padding = '5px';
                closeButton.style.cursor = 'pointer';
                closeButton.addEventListener('click', function() {
                    document.body.removeChild(itemMenu);
                });
                
                itemMenu.appendChild(closeButton);
                document.body.appendChild(itemMenu);
            });
        }
        const resetGameBtn = document.getElementById('reset-game');
const resetModal = document.getElementById('reset-modal');
const confirmReset = document.getElementById('confirm-reset');
const cancelReset = document.getElementById('cancel-reset');

resetGameBtn.addEventListener('click', () => {
  resetModal.classList.remove('hidden');
});

cancelReset.addEventListener('click', () => {
  resetModal.classList.add('hidden');
});

confirmReset.addEventListener('click', () => {
  clearGame();
  renderLevelSelect();
  renderStats();
  renderRewardsGallery();
  renderAchievements();
  resetModal.classList.add('hidden');

  // Optional: hide other screens
  levelSelect.classList.remove('hidden');
  rewardsGallery.classList.add('hidden');
  achievementsScreen.classList.add('hidden');
  shopScreen.classList.add('hidden');
});
        
function showHeroProfile(heroId) {
    const rewardContainer = document.querySelector('#hero-profile .reward-container');
rewardContainer.style.animation = 'none';
void rewardContainer.offsetWidth; // Force reflow
rewardContainer.style.animation = 'flipIn 0.5s ease forwards';

    const hero = allHeroes.find(h => h.id === heroId);
    if (!hero) return;

    document.getElementById('profile-name').textContent = hero.name;
    document.getElementById('profile-image').src = hero.image;
    document.getElementById('profile-hp').innerHTML = `<strong>HP:</strong> ${hero.hp} | <strong>Attack:</strong> ${hero.attack}`;

    document.getElementById('profile-special').innerHTML = `
      <strong>Special:</strong> ${hero.special?.name || 'Unknown'}<br>
      ${hero.special?.description || ''}
    `;

    document.getElementById('profile-rarity').innerHTML = `
      <strong>Ultimate:</strong> ${hero.ultimate?.name || 'Unknown'}<br>
      ${hero.ultimate?.description || ''}
    `;

    // ‚ú® Add Attack Lines + Hurt Lines cleanly
    const extraInfo = document.createElement('div');
    extraInfo.style.marginTop = "10px";
    extraInfo.innerHTML = `
  <strong>Attack Quotes:</strong><br>
  ${hero.attackLines?.map(line => `<em>‚Ä¢ "${line}"</em>`).join('<br>') || 'None'}
  <br><br>
  <strong>Hurt Quotes:</strong><br>
  ${hero.hurtLines?.map(line => `<em>‚Ä¢ "${line}"</em>`).join('<br>') || 'None'}
`;


    const container = document.getElementById('profile-rarity');
    container.appendChild(extraInfo);

    document.getElementById('hero-profile').classList.remove('hidden');
}


function displayRewards() {
    // Populate rewards screen
    rewardsList.innerHTML = '';
    
    gameState.currentLevel.rewards.forEach(reward => {
        const rewardItem = document.createElement('div');
        rewardItem.classList.add('reward-item');
        rewardItem.innerHTML = `
            <div class="reward-icon">üèÜ</div>
            <div>${reward}</div>
        `;
        rewardsList.appendChild(rewardItem);
    });
    
    levelStars.textContent = gameState.currentLevel.stars;
    
    // Show the reward screen
    rewardScreen.classList.remove('hidden');
}

function updateHealthBars() {
    const playerHealthPercent = Math.max(0, (gameState.playerHealth / gameState.playerCharacter.health) * 100);
    const enemyHealthPercent = Math.max(0, (gameState.enemyHealth / gameState.currentLevel.enemy.health) * 100);
    
    playerHealthBar.style.width = `${playerHealthPercent}%`;
    enemyHealthBar.style.width = `${enemyHealthPercent}%`;
    
    // Change colors based on health percentage
    if (playerHealthPercent < 25) {
        playerHealthBar.style.backgroundColor = '#FF4136'; // Red
    } else if (playerHealthPercent < 50) {
        playerHealthBar.style.backgroundColor = '#FF851B'; // Orange
    } else {
        playerHealthBar.style.backgroundColor = '#2ECC40'; // Green
    }
    
    if (enemyHealthPercent < 25) {
        enemyHealthBar.style.backgroundColor = '#FF4136';
    } else if (enemyHealthPercent < 50) {
        enemyHealthBar.style.backgroundColor = '#FF851B';
    } else {
        enemyHealthBar.style.backgroundColor = '#2ECC40';
    }
}

function calculateDamage(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function calculateHealing(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function addLogEntry(text) {
    const entry = document.createElement('div');
    entry.classList.add('log-entry');
    entry.textContent = text;
    battleLog.appendChild(entry);
    battleLog.scrollTop = battleLog.scrollHeight; // Auto-scroll to bottom
}

function playerAttackAnimation() {
    playerCharacter.classList.add('attack-animation');
    setTimeout(() => {
        playerCharacter.classList.remove('attack-animation');
    }, 500);
}

function enemyAttackAnimation() {
    enemyCharacter.classList.add('enemy-attack-animation');
    setTimeout(() => {
        enemyCharacter.classList.remove('enemy-attack-animation');
    }, 500);
}

function showDamageText(target, amount) {
    const damageText = document.createElement('div');
    damageText.classList.add('damage-text');
    damageText.textContent = `-${amount}`;
    damageText.style.left = `${Math.random() * 50 + 25}%`;
    damageText.style.top = `${Math.random() * 50 + 25}%`;
    target.appendChild(damageText);
    
    setTimeout(() => {
        target.removeChild(damageText);
    }, 1000);
}

function showHealText(target, amount) {
    const healText = document.createElement('div');
    healText.classList.add('heal-text');
    healText.textContent = `+${amount}`;
    healText.style.left = `${Math.random() * 50 + 25}%`;
    healText.style.top = `${Math.random() * 50 + 25}%`;
    target.appendChild(healText);
    
    setTimeout(() => {
        target.removeChild(healText);
    }, 1000);
}

function checkAchievement(id) {
    const achievementIndex = achievements.findIndex(a => a.id === id);
    if (achievementIndex === -1 || achievements[achievementIndex].unlocked) return;
    
    const achievement = achievements[achievementIndex];
    
    let unlocked = false;
    
    switch (id) {
        case 'first-victory':
            unlocked = gameState.totalVictories > 0;
            break;
        case 'collector':
            unlocked = gameState.unlockedRewards.length >= 5;
            break;
        case 'spender':
            unlocked = gameState.playerStats.moneySpent >= 500;
            break;
        case 'master-tactician':
            unlocked = gameState.playerHealth === gameState.playerCharacter.health;
            break;
        case 'comeback-kid':
            unlocked = gameState.playerHealth <= gameState.playerCharacter.health * 0.2 && gameState.enemyHealth <= 0;
            break;
        case 'history-master':
            unlocked = gameState.completedLevels >= levels.length;
            break;
        case 'special-master':
            unlocked = gameState.playerStats.specialUsed >= 20;
            break;
        case 'healer':
            unlocked = gameState.playerStats.totalHealing >= 500;
            break;
    }
    
    if (unlocked) {
        achievements[achievementIndex].unlocked = true;
        saveGame();
        
        // Show achievement notification
        showAchievementPopup(achievement);
        playSound('unlock');
    }
}

function showAchievementPopup(achievement) {
    const popup = document.createElement('div');
    popup.classList.add('achievement-popup');
    popup.innerHTML = `
        <div>${achievement.icon}</div>
        <div>
            <div><strong>Achievement Unlocked!</strong></div>
            <div>${achievement.name}</div>
        </div>
    `;
    
    document.body.appendChild(popup);
    
    setTimeout(() => {
        document.body.removeChild(popup);
    }, 5000);
}

function buyItem(item) {
    if (gameState.stars < item.price || gameState.ownedItems.includes(item.id)) return;
    
    gameState.stars -= item.price;
    gameState.ownedItems.push(item.id);
    gameState.playerStats.moneySpent += item.price;
    
    checkAchievement('spender');
    saveGame();
    renderStats();
    
    addLogEntry(`You bought ${item.name}!`);
}

function useItem(item) {
    addLogEntry(`You used ${item.name}!`);
    
    // Item effects are handled in the respective action functions
    // Many items are passive and don't need to be explicitly used
}

function getItemEffect(type) {
    // Check if player owns any items that affect this action type
    for (const itemId of gameState.ownedItems) {
        const item = shopItems.find(i => i.id === itemId);
        if (item && item.effect.type === type) {
            return item.effect.value;
        }
    }
    return null;
}
window.addEventListener('load', () => {
    generateCharacterGallery();
});

// Initialize the game when the page loads
window.addEventListener('DOMContentLoaded', () => {
    console.log('DOM loaded');
    initGame();
});

const yourCharactersButton = document.getElementById('show-characters');

setInterval(() => {
  yourCharactersButton.classList.add('jumping');
  
  // Remove the class after the animation finishes so it can replay
  setTimeout(() => {
    yourCharactersButton.classList.remove('jumping');
  }, 800); // Match the animation duration
}, 4000); // Every 5 seconds

</script>
</body>
</html>